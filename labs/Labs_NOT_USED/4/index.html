<!DOCTYPE html>
<!-- saved from url=(0057)http://www.cs.sfu.ca/CourseCentral/125/bbart/1/index.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta charset="utf-8">
    <title>CMPT127 Lab 4: Practice</title>
    
    <!-- Please don't change internal links and refs to absolute paths -->
    <link rel="stylesheet" href="../css/style.css">

	<!--<link rel="icon" href="../favicon.ico" type="image/x-icon"> NOT FOUND -->
	<link rel="icon" href="../img/favicon.ico" type="image/x-icon">
    
    <!-- Code syntax highlighting --> 
	<!--<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"> NOT FOUND -->
	<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js">
	</script>
	
	<!-- force printing a line number in every line when prettyprinting -->
	<style>
        .prettyprint ol.linenums > li { list-style-type: decimal; }
    </style>

</head>

<!--
Minor changes: Anne Lavergne 2017 + 2019
-->

<body>
<h1>Lab 4: Practice</h1>

<div id="floatingCornerLeft">
<a href="http://books.google.ca/books?id=RFJiAgAACAAJ&dq=%22Computer+lieben+Frauen&hl=en&sa=X&ei=H9SoUuCrBI_YoASa2oCADQ&ved=0CEcQ6AEwAA" target="_blank"><img src="../img/balloon0.jpg" height="150"></a>
</div>

<div id="floatingCornerRight">
  <a href="http://books.google.ca/books?id=RFJiAgAACAAJ&dq=%22Computer+lieben+Frauen&hl=en&sa=X&ei=H9SoUuCrBI_YoASa2oCADQ&ved=0CEcQ6AEwAA" target="_blank"><img src="../img/balloon1.jpg" height="150"></a>
</div>

<!--- <h1>Lab 3: Example code usage and output</h1>
-->

<p>In this lab you will write a small number of slightly longer, more complex functions. The algorithms required are not difficult, but you will need to think carefully about the requirements, and test your code thoroughly to meet them. These exerises are chosen because it is easy to get them <i>nearly right</i>, but they may require some thought to get exactly right.

<h3>Purpose and Outcomes</h3>
<ol>
<li>Experience setting up the working directory with required headers, Makefile, etc.
<li>More practice with following detailed requirements.
<li>More practice with loops, functions and arrays. 
<li>Testing and debugging practice.
</ol>

<h2>Setup</h2>

<div class="steps">
<!--<div class="req">-->
<ol>
<li>In your CMPT 127 working directory, create the directory <code>4</code>, add it to the repo, and make it the current directory:
<pre>$ mkdir 4
$ git add 4
$ cd 4
</pre>
</ol>
</div>
</div>


<h3>Requirements for all tasks</h3>
<div class="req">
<ol>
<li>These rules apply to all tasks. Substitude the task number for <code>X</code> in the following rules.
<li>You may use any function from Lab 3's <code>imgops.c</code> to help you.
<li>The grading robot will use <b>only</b> your source file named <code>tX.c</code> file for each task X, e.g. <code>t1.c</code>, and link it's own <tt>main()</tt> and a reference implementation of <code>imgops.c</code>.
<li>You should copy and modify any helpful Makefile, header files, and/or source files from Lab 3 such as
 the graphic interface code <code>test.c</code> to help you test your tasks.
<li>Your source file can contain other functions as long as they do not have the same names as any function
 in Lab 3's <code>imgops.c</code>. If you want to call functions from <code>imgops.c</code>, compile this file into your program: do not paste those functions into <code>tX.c</code>.
<li>Do not define a <tt>main()</tt> function in <code>tX.c</code>: this will prevent it from building
when the grading robot tests it. Your <tt>main()</tt> shoud be in another file, which will not be graded.
<li>Do not put any functions from <code>draw.h</code> in <code>tX.c</code>: these can be used in your test program but not in the submitted file itself.
</ol>
        
</div>


<div class="task">
<h2>Task 1: <tt>draw_circle()</tt></h2>
<p>You must write a function that draws a filled circle into an image array of the same type as in Lab 3. 

<h3>Requirements</h3>
<div class="req">
<ol>
<li>Create and add a single C source file called <code>t1.c</code>. 
<li><code>t1.c</code> should contain the function <tt>draw_circle()</tt> and agree exactly with this function declaration:
<pre class="prettyprint">
void draw_circle( uint8_t img[], 
                  unsigned int cols,
                  unsigned int rows,
		  int x,
		  int y,
		  int r,
		  uint8_t color );
</pre>
<li>The image array <code>img</code>, and its sizes (cols,rows) should be interpreted in the same way as for Lab 3.
<li>The function draws a filled circle in the image array in the specified color.
<li>The center of the circle is at the center of the pixel at the coordinate (x,y) and it has the specified radius in pixels.
<li>Note that x and y may fall outside the image. 
<li> On return, every pixel that contains a point inside the defined circle i.e. (distance to (x,y) &lt; radius (NOT <= radius) ) must be set to color. Do not set the color of any
other pixel.
<li>For a radius of zero, do not set any pixels.
<!--<li>This requirement does not seem to be very helpful: When rounding floating point calculations, round to the nearest integer, with 0.5 rounded up to 1.-->
</ol>
        
</div>

<h3>Example</h3>

<p>You might find these examples helpful for interpreting the specs. In every case the image array <tt>img</tt> has been zeroed in advance.

<pre class="prettyprint">draw_circle( img, 16 16, 8, 8, 1, 255); 
</pre>

<img src="img/circle_16_16.png">

<p>Note: this is 9 white pixels in the center of the image. Why does a radius of 1 cause 9 pixels to be filled? We are considering <i>all the points in the pixel</i> and not just the point at the centre of the pixel.
This diagram shows all the pixels that contain points less than R=1 from the center of the pixel at (x,y):

<p><img src="img/circle.png">

<pre class="prettyprint"> for( int i=10; i>0; i-- )
    draw_circle( img, 64, 32, 32, 16, 2*i, 200/i+55);
</pre>

<img src="img/circle_64_32.png">
 
<h2>Task 2: <tt>draw_rectangle()</tt></h2>

<p>Draw the outline of a rectangle in the specified color. 

<h3>Requirements</h3>
<div class="req">
<ol>
<li>Create and add a single C source file called <code>t2.c</code>. 
<li><code>t2.c</code> should contain the function <tt>draw_rectangle()</tt> and agree exactly with this function declaration:
<pre class="prettyprint">void draw_rectangle( uint8_t array[], 
		          unsigned int cols, 
		          unsigned int rows, 
		          int x,
		          int y,
		          int rect_width,
		          int rect_height,
		          uint8_t color );
</pre>
<li>The rectangle edges are aligned with the x,y axes. 
<li>The coordinates of a pixel are defined in the same way as they are in Task 1 (see diagram in Task 1). 
<li>A corner of the rectangle is at the pixel at coordinate (x,y), and the rectangle is <code>rect_width</code> pixels wide by <code>rect_height</code> pixels tall. 
<li>Each rectangle size may be negative, extending the rectangle to the left
 and/or up, or positive, extending right and/or down.
<li> A rectangle wih zero in either dimension should not be drawn.
<li> The rectangle outline is one pixel thick. 

</ol>
</div>

<h3>Example</h3>

<pre class="prettyprint">draw_rectangle( img, w, h, w/2, h/2, -5, -5, 128 ); 
draw_rectangle( img, w, h, w/2, h/2, 5, 5, 255 ); 
</pre>

<img src="img/rectangle.png">


<div class="task">
<h2>Task 3: <tt>life()</tt></h2>
<p>Compute one step of Conway's Game of Life. 

 The rules and history of the Game of Life can be found 
<a href="http://en.wikipedia.org/wiki/Conway's_Game_of_Life" target="_blank">here</a>.

<h4>Summary</h4>

<p>   The universe of the Game of Life is an infinite two-dimensional
   orthogonal grid of square cells, each of which is in one of two
   possible states, alive or dead. Every cell interacts with its eight
   neighbours, which are the cells that are horizontally, vertically,
   or diagonally adjacent. At each step in time, the following
   transitions occur:

<ol>
<li> Any live cell with fewer than two live neighbours dies, as if caused 
     by under-population.
<li> Any live cell with two or three live neighbours lives on to the next 
     generation.
<li> Any live cell with more than three live neighbours dies, as if by 
     overcrowding.
   <li> Any dead cell with exactly three live neighbours becomes a live cell, 
     as if by reproduction.
</ol>

<p>   The initial pattern constitutes the seed of the system. The first
   generation is created by applying the above rules simultaneously to
   every cell in the seed - births and deaths occur simultaneously,
   and the discrete moment at which this happens is sometimes called a
   tick (in other words, each generation is a pure function of the
   preceding one). The rules continue to be applied repeatedly to
   create further generations.


<h3>Requirements</h3>
<div class="req">
<ol>
<li>Create and add a single C source file called <code>t3.c</code>. 
<li><code>t3.c</code> should contain the function <tt>life()</tt> and agree exactly with this function declaration:
<pre class="prettyprint">
  void life( uint8_t array[], 
	     unsigned int cols, 
	     unsigned int rows );
</pre>
<li>Edge pixels wrap around
 left-right and top-bottom, creating a torus topology rather than
 the infinite grid of Conway's original. 
<li>'Off' pixels have the value
 0. 
<li>All non-zero values are considered 'On' pixels. <li>
New 'on' pixels
 are set to 255. 
<li>New 'off' pixels are set to 0.
</ol>

</div>

<h3>Examples</h3>

<p>Your function must correctly compute a single step of Life, so that it can be used in a loop to create a Life simulation as shown here.


<pre class="prettyprint linenums">  int glider[][2] = { {1,0}, {2,1}, {0,2}, {1,2}, {2,2} };   

  for( int i=0; i<5; i++ )
    set_pixel( img, w, h, glider[i][0], glider[i][1], 255 );
  
  for( int i=0; i<32; i++ )
    { 
      draw_image_grey( img, w, h );
      life( img, w, h );
    } 
  draw_image_grey( img, w, h );
</pre>

<img width=100 src="img/2.tiff.png">
<img width=100 src="img/3.tiff.png">
<img width=100 src="img/4.tiff.png">
<img width=100 src="img/5.tiff.png">
<img width=100 src="img/6.tiff.png">
<img width=100 src="img/7.tiff.png">
<img width=100 src="img/8.tiff.png">
<img width=100 src="img/9.tiff.png">
<img width=100 src="img/10.tiff.png">
<img width=100 src="img/11.tiff.png">
<img width=100 src="img/12.tiff.png">
<img width=100 src="img/13.tiff.png">
<img width=100 src="img/14.tiff.png">
<img width=100 src="img/15.tiff.png">
<img width=100 src="img/16.tiff.png">
<img width=100 src="img/17.tiff.png">
<img width=100 src="img/18.tiff.png">
<img width=100 src="img/19.tiff.png">
<img width=100 src="img/20.tiff.png">
<img width=100 src="img/21.tiff.png">
<img width=100 src="img/22.tiff.png">
<img width=100 src="img/23.tiff.png">
<img width=100 src="img/24.tiff.png">
<img width=100 src="img/25.tiff.png">
<img width=100 src="img/26.tiff.png">
<img width=100 src="img/27.tiff.png">
<img width=100 src="img/28.tiff.png">
<img width=100 src="img/29.tiff.png">
<!--<img width=100 src="img/30.tiff.png">-->
<img width=100 src="img/31.tiff.png">
<img width=100 src="img/32.tiff.png">
<img width=100 src="img/33.tiff.png">
<img width=100 src="img/34.tiff.png">
<img width=100 src="img/35.tiff.png">

(back where we started!)

<hr>

<div class="labends">
Lab 4 complete. <a href="../../">Back to the course web page</a>.
</div>
 
</body></html>
